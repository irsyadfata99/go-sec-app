<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reservation</title>
    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <!-- Bootstrap icon -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
    />
    <!-- Animate CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <!-- Date picker CSS - This was missing in the first HTML -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/vanillajs-datepicker@1.1.2/dist/css/datepicker-bs4.min.css"
    />
    <!-- Notie CSS - Added from second HTML -->
    <link
      rel="stylesheet"
      type="text/css"
      href="https://unpkg.com/notie/dist/notie.min.css"
    />
    <!-- SweetAlert2 CSS - Added from second HTML -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/sweetalert2@10.15.5/dist/sweetalert2.min.css"
    />
    <link rel="stylesheet" href="static/css/style.css" />
  </head>

  <body>
    <nav
      class="navbar navbar-expand-lg navbar-light bg-white bg-opacity-75 fixed-top shadow-sm"
    >
      <div class="container">
        <a href="index.html" class="navbar-brand fw-bold">Logo</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a href="index.html#home" class="nav-link">Home</a>
            </li>
            <li class="nav-item">
              <a href="index.html#about" class="nav-link">About</a>
            </li>
            <li class="nav-item">
              <a href="index.html#product" class="nav-link">Product</a>
            </li>
            <li class="nav-item">
              <a href="index.html#contact" class="nav-link">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <section class="section reservation-form py-5 bg-white">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-8 text-center animate__animated animate__fadeInUp">
            <h2 class="fw-bold mb-4">Search for Availability</h2>
            <div
              class="divider mx-auto my-4"
              style="width: 80px; height: 3px; background-color: #0dcaf0"
            ></div>

            <form
              action="reservation.html"
              method="post"
              novalidate
              class="needs-validation"
            >
              <input type="hidden" name="csrf_token" value="{{.CSRFToken}}" />
              <!-- Updated this div with the id "reservation-dates" to match the JavaScript -->
              <div
                class="row mb-4 justify-content-center"
                id="reservation-dates"
              >
                <div class="col-md-5 mb-3 mb-md-0">
                  <input
                    required
                    class="form-control py-3"
                    type="text"
                    name="start"
                    placeholder="Arrival Date"
                  />
                </div>
                <div class="col-md-5">
                  <input
                    required
                    class="form-control py-3"
                    type="text"
                    name="end"
                    placeholder="Departure Date"
                  />
                </div>
              </div>

              <button
                type="submit"
                class="btn btn-info btn-lg px-5 py-3 fw-bold"
              >
                Search Availability
                <i class="bi bi-arrow-right ms-2"></i>
              </button>
            </form>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer bg-dark text-light py-5">
      <div class="container">
        <div class="row">
          <!-- Company Info -->
          <div class="col-lg-4 mb-4 mb-lg-0">
            <h4 class="text-info mb-4">Logo</h4>
            <p>
              We provide high-quality products and services to our customers
              with dedication to excellence and customer satisfaction.
            </p>
            <div class="social-links mt-4">
              <a href="#" class="me-3 text-light"
                ><i class="bi bi-facebook"></i
              ></a>
              <a href="#" class="me-3 text-light"
                ><i class="bi bi-twitter"></i
              ></a>
              <a href="#" class="me-3 text-light"
                ><i class="bi bi-instagram"></i
              ></a>
              <a href="#" class="me-3 text-light"
                ><i class="bi bi-linkedin"></i
              ></a>
            </div>
          </div>

          <!-- Quick Links -->
          <div class="col-lg-2 col-md-6 mb-4 mb-lg-0">
            <h5 class="text-white mb-4">Quick Links</h5>
            <ul class="list-unstyled">
              <li class="mb-2">
                <a
                  href="index.html#home"
                  class="text-light text-decoration-none"
                  >Home</a
                >
              </li>
              <li class="mb-2">
                <a
                  href="index.html#about"
                  class="text-light text-decoration-none"
                  >About</a
                >
              </li>
              <li class="mb-2">
                <a
                  href="index.html#product"
                  class="text-light text-decoration-none"
                  >Products</a
                >
              </li>
              <li class="mb-2">
                <a
                  href="index.html#contact"
                  class="text-light text-decoration-none"
                  >Contact</a
                >
              </li>
              <li class="mb-2">
                <a
                  href="reservation.html"
                  class="text-light text-decoration-none"
                  >Reservation</a
                >
              </li>
            </ul>
          </div>

          <!-- Services -->
          <div class="col-lg-2 col-md-6 mb-4 mb-lg-0">
            <h5 class="text-white mb-4">Services</h5>
            <ul class="list-unstyled">
              <li class="mb-2">
                <a href="#" class="text-light text-decoration-none"
                  >Service 1</a
                >
              </li>
              <li class="mb-2">
                <a href="#" class="text-light text-decoration-none"
                  >Service 2</a
                >
              </li>
              <li class="mb-2">
                <a href="#" class="text-light text-decoration-none"
                  >Service 3</a
                >
              </li>
              <li class="mb-2">
                <a href="#" class="text-light text-decoration-none"
                  >Service 4</a
                >
              </li>
              <li class="mb-2">
                <a href="#" class="text-light text-decoration-none"
                  >Service 5</a
                >
              </li>
            </ul>
          </div>

          <!-- Newsletter -->
          <div class="col-lg-4">
            <h5 class="text-white mb-4">Newsletter</h5>
            <p>
              Subscribe to our newsletter to receive the latest updates and
              offers.
            </p>
            <form class="mt-3">
              <div class="input-group mb-3">
                <input
                  type="email"
                  class="form-control"
                  placeholder="Your Email"
                  aria-label="Your Email"
                  required
                />
                <button class="btn btn-info" type="submit">Subscribe</button>
              </div>
            </form>
          </div>
        </div>

        <hr class="my-4 bg-secondary" />

        <!-- Copyright Row -->
        <div class="row">
          <div class="col-md-6 mb-3 mb-md-0">
            <p class="mb-0">&copy; 2025 Your Company. All rights reserved.</p>
          </div>
          <div class="col-md-6 text-md-end">
            <a href="#" class="text-light text-decoration-none me-3"
              >Privacy Policy</a
            >
            <a href="#" class="text-light text-decoration-none me-3"
              >Terms of Service</a
            >
            <a href="#" class="text-light text-decoration-none"
              >Cookie Policy</a
            >
          </div>
        </div>
      </div>
    </footer>

    <!-- Updated script includes to be compatible with Bootstrap 5 -->
    <!-- jQuery (still needed for some components) -->
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>
    <!-- Bootstrap 5 Bundle JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <!-- Date picker JS -->
    <script src="https://cdn.jsdelivr.net/npm/vanillajs-datepicker@1.1.2/dist/js/datepicker-full.min.js"></script>
    <!-- Notie JS -->
    <script src="https://unpkg.com/notie"></script>
    <!-- SweetAlert2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.15.5/dist/sweetalert2.min.js"></script>

    <script>
      // Prompt functionality (from the working example)
      let attention = Prompt();

      // Form validation (adapted to work with Bootstrap 5)
      (function () {
        "use strict";
        window.addEventListener(
          "load",
          function () {
            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            let forms = document.getElementsByClassName("needs-validation");
            // Loop over them and prevent submission
            Array.prototype.filter.call(forms, function (form) {
              form.addEventListener(
                "submit",
                function (event) {
                  if (form.checkValidity() === false) {
                    event.preventDefault();
                    event.stopPropagation();
                  }
                  form.classList.add("was-validated");
                },
                false
              );
            });
          },
          false
        );
      })();

      // Date picker initialization - this is the key part that was missing/wrong
      const elem = document.getElementById("reservation-dates");
      const rangePicker = new DateRangePicker(elem, {
        format: "yyyy-mm-dd",
      });

      // Button event for custom date picker modal
      document.addEventListener("DOMContentLoaded", function () {
        const colorButton = document.getElementById("colorButton");
        if (colorButton) {
          colorButton.addEventListener("click", function () {
            let html = `
            <form id="check-availability-form" action="" method="post" novalidate class="needs-validation">
                <div class="form-row">
                    <div class="col">
                        <div class="form-row" id="reservation-dates-modal">
                            <div class="col">
                                <input disabled required class="form-control" type="text" name="start" id="start" placeholder="Arrival">
                            </div>
                            <div class="col">
                                <input disabled required class="form-control" type="text" name="end" id="end" placeholder="Departure">
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            `;
            attention.custom({
              title: "Choose your dates",
              msg: html,
            });
          });
        }
      });

      // Notification functions
      function notify(msg, msgType) {
        notie.alert({
          type: msgType,
          text: msg,
        });
      }

      function notifyModal(title, text, icon, confirmationButtonText) {
        Swal.fire({
          title: title,
          html: text,
          icon: icon,
          confirmButtonText: confirmationButtonText,
        });
      }

      // Prompt function from the working example
      function Prompt() {
        let toast = function (c) {
          const { msg = "", icon = "success", position = "top-end" } = c;

          const Toast = Swal.mixin({
            toast: true,
            title: msg,
            position: position,
            icon: icon,
            showConfirmButton: false,
            timer: 3000,
            timerProgressBar: true,
            didOpen: (toast) => {
              toast.addEventListener("mouseenter", Swal.stopTimer);
              toast.addEventListener("mouseleave", Swal.resumeTimer);
            },
          });

          Toast.fire({});
        };

        let success = function (c) {
          const { msg = "", title = "", footer = "" } = c;

          Swal.fire({
            icon: "success",
            title: title,
            text: msg,
            footer: footer,
          });
        };

        let error = function (c) {
          const { msg = "", title = "", footer = "" } = c;

          Swal.fire({
            icon: "error",
            title: title,
            text: msg,
            footer: footer,
          });
        };

        async function custom(c) {
          const { msg = "", title = "" } = c;

          const { value: formValues } = await Swal.fire({
            title: title,
            html: msg,
            backdrop: false,
            focusConfirm: false,
            showCancelButton: true,
            willOpen: () => {
              const elem = document.getElementById("reservation-dates-modal");
              const rp = new DateRangePicker(elem, {
                format: "yyyy-mm-dd",
                showOnFocus: true,
              });
            },
            didOpen: () => {
              document.getElementById("start").removeAttribute("disabled");
              document.getElementById("end").removeAttribute("disabled");
            },
            preConfirm: () => {
              return [
                document.getElementById("start").value,
                document.getElementById("end").value,
              ];
            },
          });

          if (formValues) {
            Swal.fire(JSON.stringify(formValues));
          }
        }

        return {
          toast: toast,
          success: success,
          error: error,
          custom: custom,
        };
      }
    </script>
  </body>
</html>
